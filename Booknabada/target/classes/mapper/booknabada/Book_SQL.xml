<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="book">
	<select id="booklist" resultType="com.booknabada.dto.BookDTO">
		SELECT * FROM booklist_view
	</select>
	
	<select id="bookdetail" resultType="com.booknabada.dto.BookDTO">
		SELECT * FROM bookdetail_view WHERE book_no = #{book_no }
	</select>
	
		<insert id="bookAddAction" parameterType="com.booknabada.dto.BookDTO">
		<![CDATA[
			INSERT INTO book(book_title, book_author, book_pubdate, book_page, book_publisher, 
			book_cate, price_select, book_price, book_content, user_no, book_picture)
			VALUES(#{book_title }, #{book_author }, #{book_pubdate }, #{book_page }, #{book_publisher }, 
			#{book_cate }, #{price_select }, #{book_price }, #{book_content }, 
			(SELECT user_no FROM user_info WHERE user_id=#{user_id }),#{book_picture })
		]]> 
	</insert>
</mapper>
